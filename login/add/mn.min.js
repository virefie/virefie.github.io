function dvUpdt(e,t,n){let l=n[1].length>0?'href="https://www.facebook.com/'+n[1]+'" target="_blank"':"",a=n[2].length>0?"0079999900"+n[2]:"";return emls.push(n[3]),fcbs.push(n[1]),ccps.push(n[2]),`<div id="${e}/${t}" class="dvPlc ${e}">\n  <span id="lnk${ccps.length}" class="cntnr">\n  <span  onclick="dltdiv('${e}/${t}')" class="clear" >×</span>\n  <a href="#input-box" class="mdfSVG" onclick="upVlu('${e}','${t}')">${edtSVG}</a>\n  </span>\n  <div class="normal">\n    <h2><a ${l}> ${n[0]}</a></h2><strong>:الايميل</strong> <br> ${n[3]}<br><br>\n  <strong> :رقم الحساب البريدي </strong><br> ${a}<br><br>\n  <strong> :معلومات عن الحساب</strong><br> ${n[4]}\n  </div>\n  </div>`}function rslt(e){get(child(dbRef,`${e}/`)).then(t=>{if(t.exists()){let n="",l=Object.keys(t.val());l.sort(cmprNmbr),aSn[e]=t.val(),gebi(e+"h2").innerHTML+=" "+l.length,l.forEach(t=>{n+=dvUpdt(e,t,aSn[e][t])}),gebi(`list${e}`).innerHTML=n}else gebi(`list${e}`).innerText="No data available";"Fake"==e&&(gebi("plWt").className="n",gebi("lod").className="n")})}function upVlu(e,t){let n=aSn[e][t][1].length>0?"https://www.facebook.com/"+aSn[e][t][1]:"",l=aSn[e][t][2].length>0?"0079999900"+aSn[e][t][2]:"";vlFk=e,delete emls[emls.indexOf(aSn[e][t][3])],delete fcbs[fcbs.indexOf(aSn[e][t][1])],delete ccps[ccps.indexOf(aSn[e][t][2])],frm.namePg.value=aSn[e][t][0],frm.lienPg.value=n,frm.nmbrCcpPg.value=l,frm.emailPg.value=aSn[e][t][3],frm.inf.value=aSn[e][t][4],frm.chPg.value=e,frm.sub.value="تعديل",frm.idUpdt.value=t,gebi("supmt").innerText="التعديل"}function dltdiv(e){remove(child(dbRef,e)),gebi(e).remove()}function opndvs(){document.querySelectorAll(".h2lst").forEach(e=>{e.nextElementSibling.style.display="flex"})}function afchHdn(e,t,n=""){gebi(e).innerHTML=t,setTimeout(()=>{gebi(e).innerHTML=n},3e3)}import{app,database,ref,gebi,child,get}from"../../main.js";import{push,update,remove,set}from"https://www.gstatic.com/firebasejs/9.17.1/firebase-database.js";import{getAuth,onAuthStateChanged,signOut}from"https://www.gstatic.com/firebasejs/9.17.1/firebase-auth.js";const auth=getAuth(app),dbRef=ref(database),edtSVG='<svg xmlns="http://www.w3.org/2000/svg" height="24" width="24"><path d="m19.3 8.925-4.25-4.2 1.4-1.4q.575-.575 1.413-.575.837 0 1.412.575l1.4 1.4q.575.575.6 1.388.025.812-.55 1.387ZM17.85 10.4 7.25 21H3v-4.25l10.6-10.6Z"/></svg>';let stId,vlFk,frm=document.forms[0],idUpdt="",aSn={valed:{},Fake:{}},vUp={lvrvaled:0,lvrFake:0},emls=[],fcbs=[],ccps=[];gebi("logaut").onclick=(()=>{signOut(auth).then(()=>{let e=new Date;e.setDate(-1),document.cookie="enter=;expires="+e+";path=/",window.open("../","_self")})}),get(child(dbRef,"updatV/")).then(e=>{vUp.lvrvaled=e.val().vrvaled,vUp.lvrFake=e.val().vrFake}),frm.onsubmit=(e=>{function t(e){aSn[i][stId]={0:l,1:a,2:s,3:d,4:r},e(ref(database,i+"/"+stId),aSn[i][stId]).then(()=>{function e(){frm.sub.value="إضافة",afchHdn("msageCcp","التعديل","الإضافة")}let t;afchHdn("vlpush",'تم <span id="supmt">الإضافة</span> بنجاح'),frm.reset(),t=document.createElement("div"),t.className="dvPlc",vlFk!=i&&idUpdt?(remove(child(dbRef,vlFk+"/"+idUpdt)),gebi(vlFk+"/"+idUpdt).remove(),e(),gebi(`list${i}`).innerHTML+=dvUpdt(i,stId,aSn[i][stId])):idUpdt?(gebi(i+"/"+idUpdt).outerHTML=dvUpdt(i,stId,aSn[i][stId]),e()):gebi(`list${i}`).innerHTML+=dvUpdt(i,stId,aSn[i][stId])}).catch(()=>{afchHdn("errpush","حدث خطأ أعد المحاولة")})}function n(){let e=emls.indexOf(d),t=fcbs.indexOf(a),n=ccps.indexOf(s),l=e=>` هدا الحساب موجود من قبل <a href="#lnk${e}" onclick="">إذهب إليه </a><br> `;return s&&e==t&&t==n&&n>-1&&(afchHdn("errpush",l(n+1)),opndvs()),!1}e.preventDefault();let l=frm.namePg.value,a=frm.lienPg.value,s=frm.nmbrCcpPg.value,d=frm.emailPg.value,i=frm.chPg.value,r=frm.inf.value,c=!1;idUpdt=frm.idUpdt.value,l=l.trim(),a=a.trim(),s=s.trim(),d=d.trim(),!l&&a&&(l="بدون إسم");let v=a.indexOf("facebook.com");return v<0&&a.length>0?(afchHdn("msageUrl","لديك خطأ في الرابط"),0):(v>-1&&(a=a.slice(v+13,a.length)),!isNaN(s)&&s.indexOf(" ")<0&&(12==s.length?0==s.indexOf("00")&&(c=!0,s=s.slice(2,s.length)):20==s.length?0==s.indexOf("0079999900")&&(c=!0,s=s.slice(10,s.length)):10==s.length&&(c=!0)),0==c&&s.length>0?(afchHdn("msageCcp","Ccp لديك خطأ في كتابة رقم"),0):v<0&&a.length>0?0:n()?0:void(idUpdt&&vlFk!=i?(vUp.lvrvaled++,vUp.lvrFake++,set(ref(database,"updatV/vrvaled"),vUp.lvrvaled),set(ref(database,"updatV/vrFake"),vUp.lvrFake).then(()=>{stId="P"+vUp["lvr"+i],remove(child(dbRef,idUpdt)),t(set)})):(vUp["lvr"+i]++,set(ref(database,"updatV/vr"+i),vUp["lvr"+i]).then(()=>{idUpdt?(stId=idUpdt,t(update)):(stId="P"+vUp["lvr"+i],t(set))}))))});let cmprNmbr=(e,t)=>e.slice(1)-t.slice(1);rslt("valed"),rslt("Fake"),window.upVlu=upVlu,window.dltdiv=dltdiv,document.querySelectorAll(".h2lst").forEach(e=>{e.onclick=(t=>{let n=e.nextElementSibling;"flex"==n.style.display?(n.style.display="none",e.firstElementChild.innerHTML="▼"):(n.style.display="flex",e.firstElementChild.innerHTML="▲",setTimeout(()=>{window.scrollTo(0,t.layerY)},20))})});