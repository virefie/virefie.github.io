function dvUpdt(e,t,l){let n=l[1].length>0?'href="https://www.facebook.com/'+l[1]+'" target="_blank"':"",a=l[2].length>0?"0079999900"+l[2]:"";return emls.push(l[3]),fcbs.push(l[1]),ccps.push(l[2]),`<div id="${e}/${t}" class="dvPlc ${e}">\n  <span class="cntnr">\n  <span  onclick="dltdiv('${e}/${t}')" class="clear" >×</span>\n  <a href="#input-box" class="mdfSVG" onclick="upVlu('${e}','${t}')">${edtSVG}</a>\n  </span>\n  <div class="normal">\n    <h2><a ${n}> ${l[0]}</a></h2><strong>:الايميل</strong> <br> ${l[3]}<br><br>\n  <strong> :رقم الحساب البريدي </strong><br> ${a}<br><br>\n  <strong> :معلومات عن الحساب</strong><br> ${l[4]}\n  </div>\n  </div>`}function rslt(e){get(child(dbRef,`${e}/`)).then(t=>{if(t.exists()){let l="",n=Object.keys(t.val());n.sort(cmprNmbr),aSn[e]=t.val(),gebi(e+"h2").innerHTML+=" "+n.length,n.forEach(t=>{l+=dvUpdt(e,t,aSn[e][t])}),gebi(`list${e}`).innerHTML=l}else gebi(`list${e}`).innerText="No data available";"Fake"==e&&(gebi("plWt").className="n",gebi("lod").className="n")})}function upVlu(e,t){let l=aSn[e][t][1].length>0?"https://www.facebook.com/"+aSn[e][t][1]:"",n=aSn[e][t][2].length>0?"0079999900"+aSn[e][t][2]:"";vlFk=e,frm.namePg.value=aSn[e][t][0],frm.lienPg.value=l,frm.nmbrCcpPg.value=n,frm.emailPg.value=aSn[e][t][3],frm.inf.value=aSn[e][t][4],frm.chPg.value=e,frm.sub.value="تعديل",frm.idUpdt.value=t,gebi("supmt").innerText="التعديل"}function dltdiv(e){remove(child(dbRef,e)),gebi(e).remove()}function afchHdn(e,t,l=""){gebi(e).innerHTML=t,setTimeout(()=>{gebi(e).innerHTML=l},2e3)}import{app,database,ref,gebi,child,get}from"../../main.js";import{push,update,remove,set}from"https://www.gstatic.com/firebasejs/9.17.1/firebase-database.js";import{getAuth,onAuthStateChanged,signOut}from"https://www.gstatic.com/firebasejs/9.17.1/firebase-auth.js";const auth=getAuth(app),dbRef=ref(database),edtSVG='<svg xmlns="http://www.w3.org/2000/svg" height="24" width="24"><path d="m19.3 8.925-4.25-4.2 1.4-1.4q.575-.575 1.413-.575.837 0 1.412.575l1.4 1.4q.575.575.6 1.388.025.812-.55 1.387ZM17.85 10.4 7.25 21H3v-4.25l10.6-10.6Z"/></svg>';let stId,vlFk,frm=document.forms[0],idUpdt="",aSn={valed:{},Fake:{}},vUp={lvrvaled:0,lvrFake:0},emls=[],fcbs=[],ccps=[];gebi("logaut").onclick=(()=>{signOut(auth).then(()=>{let e=new Date;e.setDate(-1),document.cookie="enter=;expires="+e+";path=/",window.open("../","_self")})}),get(child(dbRef,"updatV/")).then(e=>{vUp.lvrvaled=e.val().vrvaled,vUp.lvrFake=e.val().vrFake}),frm.onsubmit=(e=>{function t(e){aSn[i][stId]={0:n,1:a,2:s,3:d,4:r},e(ref(database,i+"/"+stId),aSn[i][stId]).then(()=>{function e(){frm.sub.value="إضافة",afchHdn("msageCcp","التعديل","الإضافة")}let t;afchHdn("vlpush",'تم <span id="supmt">الإضافة</span> بنجاح'),frm.reset(),t=document.createElement("div"),t.className="dvPlc",vlFk!=i&&idUpdt?(remove(child(dbRef,vlFk+"/"+idUpdt)),gebi(vlFk+"/"+idUpdt).remove(),delete emls[1],delete fcbs[1],delete ccps[1],e(),gebi(`list${i}`).innerHTML+=dvUpdt(i,stId,aSn[i][stId])):idUpdt?(gebi(i+"/"+idUpdt).outerHTML=dvUpdt(i,stId,aSn[i][stId]),e()):gebi(`list${i}`).innerHTML+=dvUpdt(i,stId,aSn[i][stId])}).catch(()=>{afchHdn("errpush","حدث خطأ أعد المحاولة")})}function l(){return d&&emls.includes(d)?(afchHdn("msageEmail","هدا الإميل موجود من قبل"),!0):a&&fcbs.includes(a)?(afchHdn("msageCcp","هدا الرابط موجود من قبل"),!0):!(!s||!ccps.includes(s))&&(afchHdn("msageCcp","هدا الحساب موجود من قبل"),!0)}e.preventDefault();let n=frm.namePg.value,a=frm.lienPg.value,s=frm.nmbrCcpPg.value,d=frm.emailPg.value,i=frm.chPg.value,r=frm.inf.value,c=!1;idUpdt=frm.idUpdt.value,n=n.trim(),a=a.trim(),s=s.trim(),d=d.trim(),!n&&a&&(n="بدون إسم");let v=a.indexOf("facebook.com");if(v<0&&a.length>0)return afchHdn("msageUrl","لديك خطأ في الرابط"),0;if(v>-1&&(a=a.slice(v+13,a.length)),!isNaN(s)&&s.indexOf(" ")<0&&(12==s.length?0==s.indexOf("00")&&(c=!0,s=s.slice(2,s.length)):20==s.length?0==s.indexOf("0079999900")&&(c=!0,s=s.slice(10,s.length)):10==s.length&&(c=!0)),0==c&&s.length>0)return afchHdn("msageCcp","Ccp لديك خطأ في كتابة رقم"),0;if(v<0&&a.length>0)return 0;if(idUpdt&&vlFk!=i)vUp.lvrvaled++,vUp.lvrFake++,set(ref(database,"updatV/vrvaled"),vUp.lvrvaled),set(ref(database,"updatV/vrFake"),vUp.lvrFake).then(()=>{stId="P"+vUp["lvr"+i],remove(child(dbRef,idUpdt)),t(set)});else{if(!idUpdt&&l())return 0;vUp["lvr"+i]++,set(ref(database,"updatV/vr"+i),vUp["lvr"+i]).then(()=>{idUpdt?(stId=idUpdt,t(update)):(stId="P"+vUp["lvr"+i],t(set))})}});let cmprNmbr=(e,t)=>e.slice(1)-t.slice(1);rslt("valed"),rslt("Fake"),window.upVlu=upVlu,window.dltdiv=dltdiv,document.querySelectorAll(".h2lst").forEach(e=>{e.onclick=(t=>{let l=e.nextElementSibling;"flex"==l.style.display?(l.style.display="none",e.firstElementChild.innerHTML="▼"):(l.style.display="flex",e.firstElementChild.innerHTML="▲",setTimeout(()=>{window.scrollTo(0,t.layerY)},20))})});