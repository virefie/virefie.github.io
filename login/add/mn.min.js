function dvUpdt(e,t,l){let a=l[1].length>0?'href="https://www.facebook.com/'+l[1]+'" target="_blank"':"",n=l[2].length>0?"0079999900"+l[2]:"";return`<div id="${e}/${t}" class="dvPlc">\n  <span class="cntnr">\n  <span  onclick="dltdiv('${e}/${t}')" class="clear" >×</span>\n  <a href="#input-box" class="mdfSVG" onclick="upVlu('${e}','${t}')">${edtSVG}</a>\n  </span>\n  <div class="normal">\n    <h2><a ${a}> ${l[0]}</a></h2><strong>:الايميل</strong> <br> ${l[3]}<br><br>\n  <strong> :رقم الحساب البريدي </strong><br> ${n}<br><br>\n  <strong> :معلومات عن الحساب</strong><br> ${l[4]}\n  </div>\n  </div>`}function rslt(e){get(child(dbRef,`${e}/`)).then(t=>{if(t.exists()){let l="",a=Object.keys(t.val());a.sort(cmprNmbr),aSn[e]=t.val(),a.forEach(t=>{l+=dvUpdt(e,t,aSn[e][t])}),gebi(`list${e}`).innerHTML=l,"Fake"==e&&(gebi("plWt").className="n",gebi("lod").className="n")}else gebi(`list${e}`).innerText="No data available"})}function upVlu(e,t){let l=aSn[e][t][1].length>0?"https://www.facebook.com/"+aSn[e][t][1]:"",a=aSn[e][t][2].length>0?"0079999900"+aSn[e][t][2]:"";vlFk=e,frm.namePg.value=aSn[e][t][0],frm.lienPg.value=l,frm.nmbrCcpPg.value=a,frm.emailPg.value=aSn[e][t][3],frm.inf.value=aSn[e][t][4],frm.chPg.value=e,frm.sub.value="تعديل",frm.idUpdt.value=t,gebi("supmt").innerText="التعديل"}function dltdiv(e){remove(child(dbRef,e)),gebi(e).remove()}import{app,database,ref,gebi,child,get}from"../../main.js";import{push,update,remove,set}from"https://www.gstatic.com/firebasejs/9.17.1/firebase-database.js";import{getAuth,onAuthStateChanged,signOut}from"https://www.gstatic.com/firebasejs/9.17.1/firebase-auth.js";const auth=getAuth(app),dbRef=ref(database),edtSVG='<svg xmlns="http://www.w3.org/2000/svg" height="24" width="24"><path d="m19.3 8.925-4.25-4.2 1.4-1.4q.575-.575 1.413-.575.837 0 1.412.575l1.4 1.4q.575.575.6 1.388.025.812-.55 1.387ZM17.85 10.4 7.25 21H3v-4.25l10.6-10.6Z"/></svg>';let stId,vlFk,frm=document.forms[0],idUpdt="",aSn={},vUp={lvrvaled:0,lvrFake:0};gebi("logaut").onclick=(()=>{signOut(auth).then(()=>{let e=new Date;e.setDate(-1),document.cookie="enter=;expires="+e+";path=/",window.open("../","_self")})}),get(child(dbRef,"updatV/")).then(e=>{vUp.lvrvaled=e.val().vrvaled,vUp.lvrFake=e.val().vrFake}),frm.onsubmit=(e=>{function t(e){aSn[i][stId]={0:l,1:a,2:n,3:s,4:d},e(ref(database,i+"/"+stId),aSn[i][stId]).then(()=>{function e(){gebi("supmt").innerText="التعديل",frm.sub.value="إضافة",setTimeout(()=>{gebi("supmt").innerText="الإضافة"},3e3)}let t;gebi("vlpush").style.display="block",setTimeout(()=>{gebi("vlpush").style.display="none"},2e3),frm.reset(),t=document.createElement("div"),t.className="dvPlc",vlFk==i||""==idUpdt?""==idUpdt?gebi(`list${i}`).innerHTML+=dvUpdt(i,stId,aSn[i][stId]):(gebi(i+"/"+idUpdt).outerHTML=dvUpdt(i,stId,aSn[i][stId]),e()):(remove(child(dbRef,vlFk+"/"+idUpdt)),gebi(vlFk+"/"+idUpdt).remove(),e(),gebi(`list${i}`).innerHTML+=dvUpdt(i,stId,aSn[i][stId]))}).catch(e=>{gebi("errpush").style.display="block",console.log(e),setTimeout(()=>{gebi("errpush").style.display="none"},2e3)})}e.preventDefault();let l=frm.namePg.value,a=frm.lienPg.value,n=frm.nmbrCcpPg.value,s=frm.emailPg.value,i=frm.chPg.value,d=frm.inf.value,r=!1;idUpdt=frm.idUpdt.value,l=l.trim(),a=a.trim(),n=n.trim(),s=s.trim(),""==l&&(l="بدون إسم");let v=a.indexOf("facebook.com");return v<0&&a.length>0?(gebi("msageUrl").style.display="block",setTimeout(()=>{gebi("msageUrl").style.display="none"},2e3),0):(v>-1&&(a=a.slice(v+13,a.length)),!isNaN(n)&&n.indexOf(" ")<0&&(12==n.length?0==n.indexOf("00")&&(r=!0,n=n.slice(2,n.length)):20==n.length?0==n.indexOf("0079999900")&&(r=!0,n=n.slice(10,n.length)):10==n.length&&(r=!0)),0==r&&n.length>0?(gebi("msageCcp").style.display="block",setTimeout(()=>{gebi("msageCcp").style.display="none"},2e3),0):v<0&&a.length>0?0:void(""==idUpdt||vlFk==i?(vUp["lvr"+i]++,set(ref(database,"updatV/vr"+i),vUp["lvr"+i]).then(()=>{""==idUpdt?(stId="P"+vUp["lvr"+i],t(set)):(stId=idUpdt,t(update))})):(vUp.lvrvaled++,vUp.lvrFake++,set(ref(database,"updatV/vrvaled"),vUp.lvrvaled),set(ref(database,"updatV/vrFake"),vUp.lvrFake).then(()=>{stId="P"+vUp["lvr"+i],remove(child(dbRef,idUpdt)),t(set)}))))});let cmprNmbr=(e,t)=>e.slice(1)-t.slice(1);rslt("valed"),rslt("Fake"),window.upVlu=upVlu,window.dltdiv=dltdiv,document.querySelectorAll(".h2lst").forEach(e=>{e.onclick=(t=>{let l=e.nextElementSibling;"flex"==l.style.display?(l.style.display="none",e.firstElementChild.innerHTML="▼"):(l.style.display="flex",e.firstElementChild.innerHTML="▲",setTimeout(()=>{window.scrollTo(0,t.layerY)},20))})});